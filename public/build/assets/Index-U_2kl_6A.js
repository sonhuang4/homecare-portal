import{u as R,r as j,j as e,t as m,S as d}from"./app-DKA_wRZs.js";import{A as _}from"./AdminLayout-CY3Fnkm9.js";function U({auth:v,requests:l={data:[],links:[]},filters:a={},stats:n={}}){const{success:y,error:w,info:A}=R(),[i,o]=j.useState([]),[N,c]=j.useState(!1),u=(t,s)=>{const r=new URLSearchParams(window.location.search);s==="all"||s===""?r.delete(t):r.set(t,s),d.get(`/admin/requests?${r.toString()}`,{},{preserveState:!0,preserveScroll:!0})},f=t=>{const s=new URLSearchParams(window.location.search);t===""?s.delete("search"):s.set("search",t),d.get(`/admin/requests?${s.toString()}`,{},{preserveState:!0,preserveScroll:!0})},k=t=>{o(s=>{const r=s.includes(t)?s.filter(x=>x!==t):[...s,t];return c(r.length>0),r})},S=()=>{const t=l.data.map(s=>s.id);o(i.length===t.length?[]:t),c(i.length!==t.length)},C=t=>({submitted:"bg-blue-500/20 border-blue-500/30 text-blue-400",reviewed:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400",in_progress:"bg-orange-500/20 border-orange-500/30 text-orange-400",completed:"bg-green-500/20 border-green-500/30 text-green-400",cancelled:"bg-red-500/20 border-red-500/30 text-red-400"})[t]||"bg-gray-500/20 border-gray-500/30 text-gray-400",L=t=>({document:"📄",appointment:"📅",medical:"🏥",technical:"🔧",billing:"💳",general:"📋",property_maintenance:"🏠",emergency_repair:"🚨"})[t]||"📋",M=t=>({low:"text-green-400",medium:"text-yellow-400",high:"text-orange-400",urgent:"text-red-400"})[t]||"text-gray-400",g=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=t=>{i.length!==0&&d.patch("/admin/requests/bulk-update",{request_ids:i,status:t},{onSuccess:()=>{y(`${i.length} requests updated to ${t}`),o([]),c(!1)},onError:()=>{w("Failed to update requests")}})};return e.jsx(_,{title:"Service Requests Management - NWB Admin",auth:v,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl",style:{background:"linear-gradient(135deg, rgba(0, 179, 186, 0.1) 0%, rgba(0, 179, 186, 0.05) 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full filter blur-3xl",style:{backgroundColor:"#00b3ba"}})}),e.jsx("div",{className:"relative p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-bold text-white mb-3 flex items-center",children:[e.jsx("span",{className:"mr-4 text-5xl",children:"📋"}),"Service Requests Management"]}),e.jsx("p",{className:"text-xl text-slate-300 mb-2",children:"Manage all client service requests and support tickets"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#00b3ba"},children:"Admin Dashboard • Request Management • Support System"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(m,{href:"/admin/requests/export",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Data"]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center hover:bg-white/15 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:n.total||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Requests"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center hover:bg-white/15 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:n.submitted||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Submitted"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center hover:bg-white/15 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-400",children:n.in_progress||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center hover:bg-white/15 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.completed||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Completed"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center hover:bg-white/15 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:n.urgent||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Urgent"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Search Requests"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search by subject, description, client...",defaultValue:a.search||"",onChange:t=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{f(t.target.value)},300)},className:"w-full pl-10 px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Status"}),e.jsxs("select",{value:a.status||"all",onChange:t=>u("status",t.target.value),className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"submitted",children:"🔵 Submitted"}),e.jsx("option",{value:"reviewed",children:"🟡 Reviewed"}),e.jsx("option",{value:"in_progress",children:"🟠 In Progress"}),e.jsx("option",{value:"completed",children:"🟢 Completed"}),e.jsx("option",{value:"cancelled",children:"🔴 Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Type"}),e.jsxs("select",{value:a.type||"all",onChange:t=>u("type",t.target.value),className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"document",children:"📄 Document"}),e.jsx("option",{value:"appointment",children:"📅 Appointment"}),e.jsx("option",{value:"technical",children:"🔧 Technical"}),e.jsx("option",{value:"billing",children:"💳 Billing"}),e.jsx("option",{value:"general",children:"📋 General"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>d.get("/admin/requests"),className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})})]})}),N&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-yellow-300 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.length," requests selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h("reviewed"),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm transition-all",children:"Mark as Reviewed"}),e.jsx("button",{onClick:()=>h("in_progress"),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm transition-all",children:"Mark in Progress"}),e.jsx("button",{onClick:()=>h("completed"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-all",children:"Mark Completed"}),e.jsx("button",{onClick:()=>{o([]),c(!1)},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm transition-all",children:"Clear Selection"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 overflow-hidden",children:l.data&&l.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:i.length===l.data.length&&l.data.length>0,onChange:S,className:"rounded border-gray-300 bg-[#232424]"})}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Request Details"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Client"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Priority"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-white/10",children:l.data.map(t=>{var s,r,x,p,b;return e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:i.includes(t.id),onChange:()=>k(t.id),className:"rounded border-gray-300 bg-[#232424]"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-white font-medium",children:["#",t.id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:L(t.type)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:t.subject}),e.jsx("div",{className:"text-gray-400 text-sm truncate max-w-xs",children:t.description}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.type_label||t.type})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold text-sm mr-3",children:((x=(r=(s=t.user)==null?void 0:s.name)==null?void 0:r.charAt(0))==null?void 0:x.toUpperCase())||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium text-sm",children:((p=t.user)==null?void 0:p.name)||"Unknown User"}),e.jsx("div",{className:"text-gray-400 text-xs",children:(b=t.user)==null?void 0:b.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${C(t.status)}`,children:t.status_label||t.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-sm font-medium ${M(t.priority)}`,children:t.priority_label||t.priority})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-white text-sm",children:g(t.created_at)}),t.estimated_completion&&e.jsxs("div",{className:"text-gray-400 text-xs",children:["Est:"," ",g(t.estimated_completion)]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(m,{href:`/admin/requests/${t.id}`,className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:e.jsxs("svg",{className:"w-4 h-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})})]},t.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📋"}),e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"No service requests found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:Object.values(a).some(t=>t&&t!=="all")?"No requests match your current filters. Try adjusting your search criteria.":"No service requests have been submitted yet."}),e.jsx("div",{className:"flex justify-center gap-3",children:Object.values(a).some(t=>t&&t!=="all")&&e.jsxs("button",{onClick:()=>d.get("/admin/requests"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})})]})}),l.last_page>1&&e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-gray-300 text-sm",children:["Showing ",l.from," to ",l.to," of"," ",l.total," requests"]}),e.jsx("div",{className:"flex space-x-1",children:l.links.map((t,s)=>e.jsx(m,{href:t.url||"#",className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${t.active?"text-white border":t.url?"text-gray-300 hover:text-white hover:bg-white/10":"text-gray-500 cursor-not-allowed"}`,style:t.active?{backgroundColor:"#00b3ba",borderColor:"#00b3ba"}:{},dangerouslySetInnerHTML:{__html:t.label}},s))})]})}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Request Management Guide"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-white mb-2",children:"Status Workflow:"}),e.jsxs("ul",{className:"space-y-1 text-gray-300",children:[e.jsxs("li",{children:["• 🔵 ",e.jsx("strong",{children:"Submitted:"})," New request received"]}),e.jsxs("li",{children:["• 🟡 ",e.jsx("strong",{children:"Reviewed:"})," Admin has reviewed"]}),e.jsxs("li",{children:["• 🟠 ",e.jsx("strong",{children:"In Progress:"})," Being worked on"]}),e.jsxs("li",{children:["• 🟢 ",e.jsx("strong",{children:"Completed:"})," Request fulfilled"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-white mb-2",children:"Priority Levels:"}),e.jsxs("ul",{className:"space-y-1 text-gray-300",children:[e.jsxs("li",{children:["• 🔴 ",e.jsx("strong",{children:"Urgent:"})," Immediate attention"]}),e.jsxs("li",{children:["• 🟠 ",e.jsx("strong",{children:"High:"})," Within 24 hours"]}),e.jsxs("li",{children:["• 🟡 ",e.jsx("strong",{children:"Medium:"})," Within 48 hours"]}),e.jsxs("li",{children:["• 🟢 ",e.jsx("strong",{children:"Low:"})," Within 5 days"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-white mb-2",children:"Quick Actions:"}),e.jsxs("ul",{className:"space-y-1 text-gray-300",children:[e.jsx("li",{children:"• Use bulk actions for multiple requests"}),e.jsx("li",{children:"• Filter by urgent priority for emergencies"}),e.jsx("li",{children:"• Export data for reporting"}),e.jsx("li",{children:"• Update status to track progress"})]})]})]})]})]})})}export{U as default};
