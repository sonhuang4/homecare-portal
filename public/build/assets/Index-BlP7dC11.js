import{u as w,r as b,j as e,t as c,S as u}from"./app-DKA_wRZs.js";import{C as k}from"./ClientLayout-DEKu7pz-.js";function P({auth:g,requests:x=[],stats:r={},filters:a={}}){const{info:j,success:_}=w(),[t,N]=b.useState(null),[v,f]=b.useState(!1),d=(s,l)=>{const n=new URLSearchParams(window.location.search);l==="all"||l===""?n.delete(s):n.set(s,l),u.get(`/requests?${n.toString()}`,{},{preserveState:!0,preserveScroll:!0})},y=s=>{d("search",s)},o=()=>{N(null),f(!1)},m=s=>({document:"📄",appointment:"📅",medical:"🏥",technical:"🔧",billing:"💳",general:"📋",property_maintenance:"🏠",emergency_repair:"🚨",inspection:"📋",consultation:"👨‍🔧"})[s]||"📋",h=(s,l)=>`${{submitted:"bg-blue-500/20 border-blue-500/30",reviewed:"bg-yellow-500/20 border-yellow-500/30",in_progress:"bg-orange-500/20 border-orange-500/30",completed:"bg-green-500/20 border-green-500/30",cancelled:"bg-red-500/20 border-red-500/30"}[s]||"bg-gray-500/20 border-gray-500/30"} ${l}`,i=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=(s,l)=>({document:"Property Documents",appointment:"Schedule Service",medical:"Property Assessment",technical:"Technical Support",billing:"Billing Inquiry",general:"General Support"})[s]||l;return e.jsx(k,{title:"My Service Requests - NWB Homecare",auth:g,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl",style:{background:"linear-gradient(135deg, rgba(0, 179, 186, 0.1) 0%, rgba(0, 179, 186, 0.05) 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full filter blur-3xl",style:{backgroundColor:"#00b3ba"}})}),e.jsx("div",{className:"relative p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-bold text-white flex items-center",children:[e.jsx("span",{className:"mr-4 text-5xl",children:"📋"}),"My Service Requests"]}),e.jsx("p",{className:"text-xl text-slate-300 mb-2",children:"Track your property maintenance and support requests"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#00b3ba"},children:"New Ways To Build (NWB) • Licensed & Insured • Serving LA since 2014"})]}),e.jsxs(c,{href:"/requests/create",className:"text-white px-6 py-3 rounded-lg font-medium transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",style:{backgroundColor:"#00b3ba"},children:[e.jsx("span",{children:"+"}),"New Request"]})]})})]}),e.jsx("div",{className:"bg-red-500/10 backdrop-blur-lg rounded-2xl p-6 border border-red-500/20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-3xl",children:"🚨"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-400 mb-1",children:"24/7 Emergency Property Service"}),e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:"For urgent property emergencies (water leaks, electrical failures, security breaches):"}),e.jsx("a",{href:"tel:+13235554663",className:"inline-flex items-center px-4 py-2 rounded-lg text-white font-semibold transition-all duration-300 hover:scale-105 text-sm",style:{backgroundColor:"#00b3ba"},children:"📞 818---397--8536 - Emergency Hotline"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:r.total||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Requests"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:r.submitted||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Submitted"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-400",children:r.in_progress||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.completed||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Completed"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:r.reviewed||0}),e.jsx("div",{className:"text-gray-300 text-sm",children:"Reviewed"})]})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Search Requests"}),e.jsx("input",{type:"text",placeholder:"Search subject, description...",defaultValue:a.search||"",onChange:s=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{y(s.target.value)},300)},className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Request Status"}),e.jsxs("select",{value:a.status||"all",onChange:s=>d("status",s.target.value),className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Request Type"}),e.jsxs("select",{value:a.type||"all",onChange:s=>d("type",s.target.value),className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"document",children:"Property Documents"}),e.jsx("option",{value:"appointment",children:"Schedule Service"}),e.jsx("option",{value:"medical",children:"Property Assessment"}),e.jsx("option",{value:"technical",children:"Technical Support"}),e.jsx("option",{value:"billing",children:"Billing Inquiry"}),e.jsx("option",{value:"general",children:"General Support"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>u.get("/requests"),className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"Clear Filters"})})]})}),x.length>0?e.jsx("div",{className:"grid gap-6",children:x.map(s=>e.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 hover:bg-white/15 transition-all",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-3xl",children:m(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:s.subject}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${h(s.status,s.status_color)}`,children:s.status_label}),e.jsxs("span",{className:`text-sm font-medium ${s.priority_color}`,children:[s.priority_label," Priority"]})]}),e.jsx("p",{className:"text-gray-300 mb-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"🏷️"}),e.jsx("span",{children:p(s.type,s.type_label)})]}),e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"📅"}),e.jsxs("span",{children:["Created: ",i(s.created_at)]})]}),s.estimated_completion&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"⏰"}),e.jsxs("span",{children:["Est. Completion: ",s.estimated_completion_human||i(s.estimated_completion)]})]}),s.contact_preference&&s.contact_preference.length>0&&e.jsxs("div",{className:"flex items-start text-gray-300",children:[e.jsx("span",{className:"mr-2 mt-0.5",children:"📞"}),e.jsxs("span",{children:["Contact: ",s.contact_preference.join(", ")]})]})]}),e.jsxs("div",{className:"space-y-2",children:[s.phone&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"📱"}),e.jsx("span",{children:s.phone})]}),s.preferred_contact_time&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"mr-2",children:"🕐"}),e.jsxs("span",{children:["Preferred: ",s.preferred_contact_time]})]}),s.attachments&&s.attachments.length>0&&e.jsxs("div",{className:"flex items-start text-gray-300",children:[e.jsx("span",{className:"mr-2 mt-0.5",children:"📎"}),e.jsxs("span",{className:"flex-1 text-xs",children:[s.attachments.length," attachment(s)"]})]}),s.is_overdue&&e.jsxs("div",{className:"flex items-start text-red-400",children:[e.jsx("span",{className:"mr-2 mt-0.5",children:"⚠️"}),e.jsx("span",{className:"flex-1 text-xs font-medium",children:"Overdue"})]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row lg:flex-col gap-2 lg:w-48",children:[e.jsx(c,{href:`/requests/${s.id}`,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all text-center",children:"View Details"}),s.status==="completed"&&e.jsx("button",{onClick:()=>j("Feedback feature coming soon!"),className:"text-white px-4 py-2 rounded-lg text-sm font-medium transition-all text-center",style:{backgroundColor:"#00b3ba"},children:"Leave Review"}),s.status==="submitted"&&e.jsx(c,{href:`/requests/create?duplicate=${s.id}`,className:"text-white px-4 py-2 rounded-lg text-sm font-medium transition-all text-center",style:{backgroundColor:"#00b3ba"},children:"Duplicate Request"})]})]})},s.id))}):e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📋"}),e.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"No service requests found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:Object.keys(a).some(s=>a[s]&&a[s]!=="all")?"No requests match your current filters. Try adjusting your search criteria.":"You don't have any property service requests yet."}),e.jsx(c,{href:"/requests/create",className:"text-white px-6 py-3 rounded-lg font-medium transition-all transform hover:scale-105",style:{backgroundColor:"#00b3ba"},children:"Submit Your First Request"})]}),v&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:o,children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Request Details"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-white transition-colors text-2xl",children:"×"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:m(t.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:t.subject}),e.jsx("p",{className:"text-gray-300",children:p(t.type,t.type_label)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("p",{className:"text-white",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${h(t.status,t.status_color)}`,children:t.status_label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Priority"}),e.jsx("p",{className:`font-medium ${t.priority_color}`,children:t.priority_label})]})]}),t.contact_preference&&t.contact_preference.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Contact Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.contact_preference.map((s,l)=>e.jsx("span",{className:"bg-white/10 text-gray-300 px-2 py-1 rounded text-sm capitalize",children:s},l))})]}),t.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone Number"}),e.jsx("p",{className:"text-white",children:t.phone})]}),t.preferred_contact_time&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Preferred Contact Time"}),e.jsx("p",{className:"text-white capitalize",children:t.preferred_contact_time})]}),t.estimated_completion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Estimated Completion"}),e.jsx("p",{className:"text-white",children:t.estimated_completion_human||i(t.estimated_completion)})]}),t.attachments&&t.attachments.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Attachments"}),e.jsx("div",{className:"space-y-2",children:t.attachments.map((s,l)=>e.jsxs("div",{className:"flex items-center text-blue-400",children:[e.jsx("span",{className:"mr-2",children:"📎"}),e.jsx("a",{href:`/storage/requests/${s}`,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:s})]},l))})]}),t.admin_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"NWB Team Notes"}),e.jsx("p",{className:"text-white bg-blue-500/10 p-3 rounded-lg border border-blue-500/20",children:t.admin_notes})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300",children:"Created"}),e.jsx("p",{className:"text-white",children:i(t.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300",children:"Last Updated"}),e.jsx("p",{className:"text-white",children:i(t.updated_at)})]})]}),t.is_overdue&&e.jsx("div",{className:"bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:e.jsx("p",{className:"text-red-300 text-sm font-medium",children:"⚠️ This request is overdue. Our team has been notified and will prioritize your request."})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:o,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"Close"}),e.jsx(c,{href:`/requests/${t.id}`,className:"text-white px-4 py-2 rounded-lg transition-all",style:{backgroundColor:"#00b3ba"},children:"Full Details"})]})]})}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💡"}),"Request Types We Handle"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"📄"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"Property Documents"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Contracts, warranties, inspection reports"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"📅"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"Schedule Service"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Book maintenance visits and consultations"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"🏠"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"Property Assessment"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Property evaluations and condition reports"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"🔧"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"Technical Support"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Portal help and technical assistance"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"💳"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"Billing Inquiry"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Questions about invoices and payments"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[e.jsx("span",{className:"text-3xl block mb-2",children:"📋"}),e.jsx("h4",{className:"text-white font-semibold mb-1",children:"General Support"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Any other questions or concerns"})]})]})]})]})})}export{P as default};
