import{u as w,r as m,j as e,t as v,S as _}from"./app-CM2Jc_wx.js";import{C as k}from"./ClientLayout-0McRaGse.js";function R({auth:p,request:s}){const{success:g,info:r}=w(),[h,n]=m.useState(!1),[l,d]=m.useState(null),x=t=>({preventive_maintenance:"ðŸ”§",emergency_repair:"ðŸš¨",property_inspection:"ðŸ“‹",home_improvement:"ðŸ—ï¸",hvac_service:"â„ï¸",plumbing_service:"ðŸš¿",electrical_service:"âš¡",roofing_service:"ðŸ ",painting_service:"ðŸŽ¨",landscaping_service:"ðŸŒ¿",security_service:"ðŸ”’",general_maintenance:"ðŸ› ï¸",document:"ðŸ“„",appointment:"ðŸ“…",medical:"ðŸ¥",technical:"ðŸ’»",billing:"ðŸ’³",general:"â“"})[t]||"ðŸ“‹",b=t=>({submitted:"bg-blue-500/20 border-blue-500/30 text-blue-400",reviewed:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400",in_progress:"bg-orange-500/20 border-orange-500/30 text-orange-400",completed:"bg-green-500/20 border-green-500/30 text-green-400",cancelled:"bg-red-500/20 border-red-500/30 text-red-400"})[t]||"bg-gray-500/20 border-gray-500/30 text-gray-400",j=t=>({low:"bg-green-500/20 border-green-500/30 text-green-400",medium:"bg-yellow-500/20 border-yellow-500/30 text-yellow-400",high:"bg-orange-500/20 border-orange-500/30 text-orange-400",emergency:"bg-red-500/20 border-red-500/30 text-red-400",urgent:"bg-red-500/20 border-red-500/30 text-red-400"})[t]||"bg-gray-500/20 border-gray-500/30 text-gray-400",o=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set",u=t=>{const i=t.split(".").pop().toLowerCase();return{pdf:"ðŸ“„",doc:"ðŸ“",docx:"ðŸ“",jpg:"ðŸ–¼ï¸",jpeg:"ðŸ–¼ï¸",png:"ðŸ–¼ï¸",gif:"ðŸ–¼ï¸",heic:"ðŸ–¼ï¸"}[i]||"ðŸ“Ž"},c=t=>{const i=t.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","heic"].includes(i)},f=t=>{typeof t=="object"&&t.path?c(t.original_name||t.filename)?(d(t),n(!0)):(r(`Opening ${t.original_name||t.filename}...`),window.open(`/storage/${t.path}`,"_blank")):c(t)?(d(t),n(!0)):(r(`Opening ${t}...`),window.open(`/storage/requests/${t}`,"_blank"))},y=()=>{navigator.clipboard.writeText(`REQ-${s.id.toString().padStart(6,"0")}`),g("Request ID copied to clipboard!")},N=()=>{_.get(route("requests.create"),{duplicate:s.id})};return e.jsx(k,{title:`Request Details - ${s.subject} - NWB`,auth:p,children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl",style:{background:"linear-gradient(135deg, rgba(0, 179, 186, 0.1) 0%, rgba(0, 179, 186, 0.05) 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full filter blur-3xl",style:{backgroundColor:"#00b3ba"}})}),e.jsxs("div",{className:"relative p-8",children:[e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsx(v,{href:"/requests",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"â† Back to Requests"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-4xl font-bold text-white flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-5xl",children:x(s.type)}),s.subject]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:y,className:"text-gray-300 hover:text-white text-sm transition-colors flex items-center gap-1",style:{color:"#00b3ba"},children:["ID: REQ-",s.id.toString().padStart(6,"0"),e.jsx("span",{className:"text-xs",children:"ðŸ“‹"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${b(s.status)}`,children:s.status_label||s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${j(s.priority)}`,children:[s.priority_label||s.priority.charAt(0).toUpperCase()+s.priority.slice(1)," Priority"]})]})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Request Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("p",{className:"text-white leading-relaxed bg-white/5 p-4 rounded-lg",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),e.jsxs("p",{className:"text-white flex items-center",children:[e.jsx("span",{className:"mr-2",children:x(s.type)}),s.type_label||s.type.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),e.jsx("p",{className:`font-medium ${s.priority==="emergency"?"text-red-400":s.priority==="high"?"text-orange-400":s.priority==="medium"?"text-yellow-400":"text-green-400"}`,children:s.priority_label||s.priority.charAt(0).toUpperCase()+s.priority.slice(1)})]})]}),s.property_address&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Property Address"}),e.jsx("p",{className:"text-white",children:s.property_address})]}),s.subscription_tier&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subscription Plan"}),e.jsx("p",{className:"text-white",children:s.subscription_tier_label||s.subscription_tier.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Contact Preference"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:(s.contact_preference||[]).map((t,i)=>e.jsx("span",{className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-sm",children:t.charAt(0).toUpperCase()+t.slice(1)},i))})]}),s.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone"}),e.jsx("p",{className:"text-white",children:s.phone})]})]}),s.preferred_contact_time&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Contact Time"}),e.jsx("p",{className:"text-white capitalize",children:s.preferred_contact_time})]}),s.property_access_info&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Property Access Information"}),e.jsx("p",{className:"text-white bg-white/5 p-4 rounded-lg",children:s.property_access_info})]})]})]}),s.attachments&&s.attachments.length>0&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4",children:["Attachments (",s.attachments.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.attachments.map((t,i)=>{const a=typeof t=="object"?t.original_name||t.filename:t;return e.jsxs("div",{onClick:()=>f(t),className:"flex items-center p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition-all cursor-pointer group",children:[e.jsx("span",{className:"text-2xl mr-3 group-hover:scale-110 transition-transform",children:u(a)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:a}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[c(a)?"Click to view":"Click to download",typeof t=="object"&&t.size&&` â€¢ ${(t.size/1024/1024).toFixed(1)}MB`]})]}),e.jsx("span",{className:"text-gray-400 group-hover:text-white transition-colors",children:c(a)?"ðŸ‘ï¸":"â¬‡ï¸"})]},i)})})]}),s.admin_notes&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ’¬"}),"NWB Team Notes"]}),e.jsx("div",{className:"rounded-lg p-4 border",style:{backgroundColor:"rgba(0, 179, 186, 0.1)",borderColor:"#00b3ba"},children:e.jsx("p",{className:"text-white leading-relaxed",children:s.admin_notes})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Created:"}),e.jsx("span",{className:"text-white text-sm",children:o(s.created_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Last Updated:"}),e.jsx("span",{className:"text-white text-sm",children:o(s.updated_at)})]}),s.estimated_completion&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Est. Completion:"}),e.jsx("span",{className:"text-green-400 text-sm",children:o(s.estimated_completion)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Attachments:"}),e.jsx("span",{className:"text-white",children:s.attachments_count||(s.attachments?s.attachments.length:0)})]}),s.credit_usage&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Credit Usage:"}),e.jsx("span",{className:"text-green-400 text-sm",children:"Applied"})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>r("Contact feature coming soon!"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all font-medium",children:"Contact Support"}),e.jsx("button",{onClick:N,className:"w-full text-white px-4 py-2 rounded-lg transition-all font-medium",style:{backgroundColor:"#00b3ba"},children:"Duplicate Request"}),e.jsx("button",{onClick:()=>window.print(),className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all font-medium",children:"Print Request"}),s.status!=="completed"&&s.status!=="cancelled"&&e.jsx("button",{onClick:()=>r("Cancel request feature coming soon!"),className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all font-medium",children:"Cancel Request"})]})]})]})]}),h&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>n(!1),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] bg-white rounded-lg overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx("button",{onClick:()=>n(!1),className:"bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/70 transition-colors",children:"Ã—"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("img",{src:typeof l=="object"?`/storage/${l.path}`:`/storage/requests/${l}`,alt:typeof l=="object"?l.original_name:l,className:"max-w-full max-h-[80vh] object-contain mx-auto",onError:t=>{t.target.src="/api/placeholder/800/600"}}),e.jsx("p",{className:"text-center text-gray-600 mt-2 font-medium",children:typeof l=="object"?l.original_name:l})]})]})})]})})}export{R as default};
