import{u as P,r as A,x as q,j as e,t as m}from"./app-DKA_wRZs.js";import{C as D}from"./ClientLayout-DEKu7pz-.js";function M({auth:x,appointment:p}){const{success:h,info:i,error:u,warning:b}=P(),[g,n]=A.useState(!1),{data:l,setData:c,patch:f,processing:o}=q({cancellation_reason:"",cancellation_notes:""}),s=p||{id:1,service_type:"preventive_maintenance",title:"Monthly Preventive Maintenance Visit",description:"Routine property inspection and maintenance check including HVAC, plumbing, electrical systems",appointment_date:"2024-06-25",start_time:"10:00",status:"confirmed",priority:"medium",address:"1247 Sunset Blvd, Los Angeles, CA 90026",contact_phone:"+1 (323) 555-4663",special_requirements:["key_access","pet_present","ladder_access"],notes:"Focus on kitchen faucet leak and check HVAC filter replacement. Property has two dogs (friendly). Gate code is 1247.",admin_notes:"Technician Mike Rodriguez assigned. Tools and materials prepared. Customer contacted to confirm access requirements.",assigned_staff:"Senior Technician Mike Rodriguez",confirmed_at:"2024-06-23T09:15:00.000000Z",created_at:"2024-06-20T10:30:00.000000Z",service_type_label:"Preventive Maintenance",status_label:"Confirmed",priority_label:"Standard",status_color:"text-green-400",priority_color:"text-yellow-400",full_date_time:"Jun 25, 2024 at 10:00 AM",duration:120,can_be_cancelled:!0,can_be_rescheduled:!0},y=t=>({preventive_maintenance:"🔧",emergency_repair:"🚨",property_inspection:"📋",home_improvement:"🏗️",hvac_service:"❄️",plumbing_service:"🚿",electrical_service:"⚡",roofing_service:"🏠",painting_service:"🎨",landscaping_service:"🌿",security_service:"🔒",general_maintenance:"🛠️",consultation:"👨‍⚕️",home_visit:"🏠",follow_up:"🔄",assessment:"📋",therapy:"💪",medical_checkup:"🩺"})[t]||"📅",j=(t,r)=>`${{scheduled:"bg-blue-500/20 border-blue-500/30",confirmed:"bg-green-500/20 border-green-500/30",in_progress:"bg-orange-500/20 border-orange-500/30",completed:"bg-green-600/20 border-green-600/30",cancelled:"bg-red-500/20 border-red-500/30",no_show:"bg-gray-500/20 border-gray-500/30"}[t]||"bg-gray-500/20 border-gray-500/30"} ${r}`,v=(t,r)=>`${{low:"bg-green-500/20 border-green-500/30",medium:"bg-yellow-500/20 border-yellow-500/30",high:"bg-orange-500/20 border-orange-500/30",urgent:"bg-red-500/20 border-red-500/30"}[t]||"bg-gray-500/20 border-gray-500/30"} ${r}`,d=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,_=t=>({key_access:"Property Key Required",gate_code:"Gate Code Needed",pet_present:"Pets on Property",power_shutoff:"Power Shutoff Required",water_shutoff:"Water Shutoff Required",tenant_occupied:"Tenant Occupied Property",ladder_access:"Ladder/Height Work",heavy_equipment:"Heavy Equipment Needed",permits_required:"Permits Required",safety_equipment:"Special Safety Equipment",wheelchair_access:"Wheelchair Access",oxygen_support:"Oxygen Support",interpreter:"Interpreter Needed",mobility_assistance:"Mobility Assistance",medication_management:"Medication Management",family_member_present:"Family Member Present"})[t]||t.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase()),N=t=>({key_access:"🔑",gate_code:"🚪",pet_present:"🐕",power_shutoff:"⚡",water_shutoff:"💧",tenant_occupied:"🏠",ladder_access:"🪜",heavy_equipment:"🚚",permits_required:"📋",safety_equipment:"🦺",wheelchair_access:"♿",oxygen_support:"🫁",interpreter:"🗣️",mobility_assistance:"🦯",medication_management:"💊",family_member_present:"👨‍👩‍👧‍👦"})[t]||"📋",w=t=>{if(t.preventDefault(),!l.cancellation_reason){b("Please select a cancellation reason");return}f(`/appointments/${s.id}/cancel`,{onSuccess:()=>{h("🏡 Service appointment cancelled successfully. Our team has been notified."),n(!1)},onError:()=>{u("Failed to cancel service appointment. Please try again or call (323) 555-HOME.")}})},S=[{value:"schedule_conflict",label:"Schedule Conflict"},{value:"no_longer_needed",label:"Service No Longer Needed"},{value:"emergency",label:"Emergency Situation"},{value:"personal_reasons",label:"Personal Reasons"},{value:"property_issues",label:"Property Access Issues"},{value:"other",label:"Other"}],k=(t,r)=>{if(s.full_date_time)return s.full_date_time;const a=new Date(t),C=r.includes("T")?new Date(r):new Date(`2000-01-01T${r}`);return a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+" at "+C.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return e.jsx(D,{title:`Service Appointment #${s.id} - NWB Homecare`,auth:x,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl",style:{background:"linear-gradient(135deg, rgba(0, 179, 186, 0.1) 0%, rgba(0, 179, 186, 0.05) 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 rounded-full filter blur-3xl",style:{backgroundColor:"#00b3ba"}})}),e.jsx("div",{className:"relative p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx(m,{href:"/appointments",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"← Back to Service Appointments"})}),e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:y(s.service_type)}),s.title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:s.service_type_label}),e.jsx("p",{className:"text-sm font-medium mt-1",style:{color:"#00b3ba"},children:"New Ways To Build (NWB) • Professional Property Maintenance"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${j(s.status,s.status_color)}`,children:s.status_label}),e.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(s.priority,s.priority_color)}`,children:[s.priority_label," Priority"]})]})]})})]}),e.jsx("div",{className:"bg-red-500/10 backdrop-blur-lg rounded-2xl p-6 border border-red-500/20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-3xl",children:"🚨"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-400 mb-1",children:"24/7 Emergency Service"}),e.jsx("p",{className:"text-slate-300 text-sm mb-2",children:"For urgent property emergencies or appointment changes:"}),e.jsx("a",{href:"tel:+13235554663",className:"inline-flex items-center px-4 py-2 rounded-lg text-white font-semibold transition-all duration-300 hover:scale-105 text-sm",style:{backgroundColor:"#00b3ba"},children:"📞 818---397--8536 - Emergency Hotline"})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Service Appointment Details"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white/5 rounded-xl p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Service Date & Time"}),e.jsx("p",{className:"text-white text-lg font-semibold",children:k(s.appointment_date,s.start_time)}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Duration: ",s.duration||60," minutes"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Assigned Technician"}),e.jsxs("p",{className:"text-white font-medium flex items-center",children:[e.jsx("span",{className:"mr-2",children:"👷‍♂️"}),s.assigned_staff||"Technician will be assigned 24 hours before service"]})]})]})}),s.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Service Description"}),e.jsx("p",{className:"text-white leading-relaxed bg-white/5 p-4 rounded-lg",children:s.description})]}),s.address&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Property Address"}),e.jsxs("div",{className:"flex items-start gap-3 bg-white/5 p-4 rounded-lg",children:[e.jsx("span",{className:"text-xl",children:"📍"}),e.jsx("p",{className:"text-white",children:s.address})]})]}),s.contact_phone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Contact Phone for Service Day"}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-lg",children:[e.jsx("span",{className:"text-xl",children:"📞"}),e.jsx("p",{className:"text-white",children:s.contact_phone})]})]}),s.special_requirements&&s.special_requirements.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Property Access & Safety Requirements"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.special_requirements.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-white/30",style:{backgroundColor:"rgba(0, 179, 186, 0.1)"},children:[e.jsx("span",{className:"text-xl",children:N(t)}),e.jsx("span",{className:"text-white font-medium",children:_(t)})]},r))})]}),s.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Property & Service Notes"}),e.jsx("p",{className:"text-white bg-white/5 p-4 rounded-lg leading-relaxed",children:s.notes})]}),s.admin_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Technician Preparation Notes"}),e.jsx("div",{className:"border border-yellow-500/20 rounded-lg p-4",style:{backgroundColor:"rgba(0, 179, 186, 0.1)"},children:e.jsx("p",{className:"text-white leading-relaxed",children:s.admin_notes})})]}),s.status==="cancelled"&&e.jsxs("div",{className:"bg-red-500/10 p-4 rounded-lg border border-red-500/20",children:[e.jsx("label",{className:"block text-sm font-medium text-red-300 mb-2",children:"Cancellation Details"}),s.cancellation_reason&&e.jsxs("p",{className:"text-red-200 text-sm mb-1",children:["Reason: ",s.cancellation_reason.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())]}),s.cancellation_notes&&e.jsxs("p",{className:"text-red-200 text-sm mb-1",children:["Notes: ",s.cancellation_notes]}),s.cancelled_at&&e.jsxs("p",{className:"text-red-200 text-sm",children:["Cancelled: ",new Date(s.cancelled_at).toLocaleString()]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Service Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Service Type:"}),e.jsx("span",{className:"text-white text-sm",children:s.service_type_label})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Status:"}),e.jsx("span",{className:`text-sm font-medium ${s.status_color}`,children:s.status_label})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Priority:"}),e.jsx("span",{className:`text-sm font-medium ${s.priority_color}`,children:s.priority_label})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Requested:"}),e.jsx("span",{className:"text-white text-sm",children:d(s.created_at)})]}),s.confirmed_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Confirmed:"}),e.jsx("span",{className:"text-green-400 text-sm",children:d(s.confirmed_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Duration:"}),e.jsxs("span",{className:"text-white text-sm",children:[s.duration||60," minutes"]})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Service Actions"}),e.jsxs("div",{className:"space-y-3",children:[s.can_be_rescheduled&&e.jsx(m,{href:`/appointments/${s.id}/reschedule`,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-3 rounded-lg transition-all font-medium text-center block",children:"📅 Reschedule Service"}),s.can_be_cancelled&&e.jsx("button",{onClick:()=>n(!0),className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg transition-all font-medium",children:"❌ Cancel Service"}),e.jsx("button",{onClick:()=>i("WhatsApp support integration coming soon!"),className:"w-full text-white px-4 py-3 rounded-lg transition-all font-medium",style:{backgroundColor:"#00b3ba"},children:"💬 WhatsApp Support"}),e.jsx("button",{onClick:()=>window.print(),className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-all font-medium",children:"🖨️ Print Service Details"}),s.status==="completed"&&e.jsx("button",{onClick:()=>i("Service feedback feature coming soon!"),className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-all font-medium",children:"⭐ Rate Service"})]})]}),e.jsxs("div",{className:"border border-blue-500/20 rounded-2xl p-6",style:{backgroundColor:"rgba(0, 179, 186, 0.1)"},children:[e.jsxs("h4",{className:"text-blue-300 font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🏡"}),"NWB Service Information"]}),e.jsxs("ul",{className:"text-blue-200 text-sm space-y-2",children:[e.jsx("li",{children:"• Licensed technicians with 5+ years experience"}),e.jsx("li",{children:"• Arrive within 30-minute window of scheduled time"}),e.jsx("li",{children:"• SMS notifications with live technician tracking"}),e.jsx("li",{children:"• All work includes NWB quality guarantee"}),e.jsx("li",{children:"• Emergency service available 24/7"}),e.jsx("li",{children:"• Free re-service within 30 days if issues persist"})]})]}),(s.service_type==="preventive_maintenance"||s.service_type==="general_maintenance")&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20",children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💳"}),"Subscription Benefits"]}),e.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[e.jsx("li",{children:"• Priority scheduling for subscribers"}),e.jsx("li",{children:"• Discounted rates on additional services"}),e.jsx("li",{children:"• Credit rollover for unused visits"}),e.jsx("li",{children:"• No trip charges for subscription services"})]})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>n(!1),children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl border border-white/20 p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Cancel Service Appointment"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to cancel this service appointment? Our team will be notified immediately."}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Reason for Cancellation *"}),e.jsxs("select",{value:l.cancellation_reason,onChange:t=>c("cancellation_reason",t.target.value),className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#00b3ba"},required:!0,children:[e.jsx("option",{value:"",children:"Select a reason"}),S.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:l.cancellation_notes,onChange:t=>c("cancellation_notes",t.target.value),rows:"3",className:"w-full px-3 py-2 bg-[#232424] border border-white/30 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:border-transparent resize-none",style:{"--tw-ring-color":"#00b3ba"},placeholder:"Any additional information about the cancellation or rescheduling preferences..."})]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-yellow-200 text-sm",children:[e.jsx("strong",{children:"Note:"})," Cancellations less than 24 hours before service may incur a fee. Emergency cancellations are exempt."]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"Keep Appointment"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50",children:o?"Cancelling...":"Cancel Service"})]})]})]})})]})})}export{M as default};
